import{r as a,j as u}from"./index-962aa7a8.js";const A="REQUIRE",E="MINLENGTH",V="MAXLENGTH",R="MIN",N="MAX",T="EMAIL",f="NUMBER_RANGE",y=()=>({type:A}),M=t=>({type:E,val:t}),L=()=>({type:"NUMBER_RANGE",min:1,max:10}),v=()=>({type:T}),p=(t,e)=>{let i=!0;for(const s of e)s.type===A&&(i=i&&t.trim().length>0),s.type===E&&(i=i&&t.trim().length>=s.val),s.type===V&&(i=i&&t.trim().length<=s.val),s.type===R&&(i=i&&+t>=s.val),s.type===N&&(i=i&&+t<=s.val),s.type===T&&(i=i&&/^\S+@\S+\.\S+$/.test(t)),s.type===f&&(i=i&&+t>=s.min&&+t<=s.max);return i};const _=(t,e)=>{switch(e.type){case"CHANGE":return{...t,value:e.val,isValid:p(e.val,e.validators)};case"TOUCH":return{...t,isTouched:!0};default:return t}},O=t=>{const[e,i]=a.useReducer(_,{value:t.initialValue||"",isValid:t.initialValid||!1,isTouched:!1}),{id:s,onInput:r}=t,{value:d,isValid:c}=e;a.useEffect(()=>{t.onInput(t.id,e.value,e.isValid)},[s,d,c,r]);const n=I=>{i({type:"CHANGE",val:I.target.value,validators:t.validators})},l=()=>{i({type:"TOUCH"})},o=t.element==="input"?u.jsx("input",{id:t.id,type:t.type,placeholder:t.placeholder,onChange:n,onBlur:l,value:e.value}):u.jsx("textarea",{id:t.id,rows:t.row||3,onChange:n,onBlur:l,value:e.value});return u.jsxs("div",{className:`form-control ${!e.isValid&&e.isTouched&&"form-control--invalid"}`,children:[u.jsx("label",{htmlFor:t.id,children:t.label}),o,!e.isValid&&e.isTouched&&u.jsx("p",{children:t.errorText})]})},m=(t,e)=>{switch(e.type){case"INPUT_CHANGE":let i=!0;for(const s in t.inputs)t.inputs[s]&&(s===e.inputId?i=i&&e.isValid:i=i&&t.inputs[s].isValid);return{...t,inputs:{...t.inputs,[e.inputId]:{value:e.value,isValid:e.isValid}},isValid:i};case"SET_DATA":return{inputs:e.inputs,isValid:e.formIsValid};case"COMMENT":return{inputs:e.inputs};default:return t}},C=(t,e)=>{const[i,s]=a.useReducer(m,{inputs:t,isValid:e}),r=a.useCallback((n,l,o)=>{s({type:"INPUT_CHANGE",value:l,isValid:o,inputId:n})},[]),d=a.useCallback((n,l)=>{s({type:"SET_DATA",inputs:n,formIsValid:l})},[]),c=a.useCallback(n=>{s({type:"COMMENT",inputs:n})},[]);return[i,r,d,c]};export{O as I,y as V,M as a,L as b,v as c,C as u};
