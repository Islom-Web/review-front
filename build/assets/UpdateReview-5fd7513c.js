import{r as l,b as j,A as V,u as E,j as e,a as I}from"./index-6f7faf75.js";import{u as A,E as C,B as P}from"./http-hook-88248e19.js";import{u as T,I as m,V as y,a as R}from"./form-hook-0926a5de.js";import{C as b}from"./Card-f52b186a.js";/* empty css                  */const H=()=>{const{isLoading:n,error:o,sendRequest:i,clearError:x}=A(),[a,h]=l.useState(),{placeId:s}=j(),c=l.useContext(V),f=E(),[r,d,p]=T({title:{value:"",isValid:!0},description:{value:"",isValid:!0}},!1);l.useEffect(()=>{(async()=>{try{const t=await i(`http://localhost:5000/api/places/${s}`);h(t.place),p({title:{value:t.place.title,isValid:!0},description:{value:t.place.description,isValid:!0}},!0)}catch{}})()},[i,s,p]);const v=async u=>{u.preventDefault();try{await i(`http://localhost:5000/api/places/${s}`,"PATCH",JSON.stringify({title:r.inputs.title.value,description:r.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+c.token}),f("/"+c.userId+"/places")}catch{}};return n?e.jsx("div",{className:"center",children:e.jsx(I,{})}):!a&&!o?e.jsx("div",{className:"center",children:e.jsx(b,{children:e.jsx("h2",{children:"Coundlnt find place!"})})}):e.jsxs(e.Fragment,{children:[e.jsx(C,{error:o,onClear:x}),!n&&a&&e.jsxs("form",{className:"place-form",onSubmit:v,children:[e.jsx(m,{id:"title",element:"input",type:"text",label:"Title",validators:[y()],errorText:"Please enter a valid title",onInput:d,initialValue:a.title,initialValid:!0}),e.jsx(m,{id:"description",element:"textarea",label:"Description",validators:[R(5)],errorText:"Please enter a valid description",onInput:d,initialValue:a.description,initialValid:!0}),e.jsx(P,{type:"submit",disabled:!r.isValid,children:"UPDATE REVIEW"})]})]})};export{H as default};
